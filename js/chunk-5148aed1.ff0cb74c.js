(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5148aed1"],{"076a":function(e,t,r){},"10cc":function(e,t,r){e.exports=r.p+"img/avatar.ffc2e647.jpg"},1336:function(e,t,r){},"331f":function(e,t,r){"use strict";var n=r("1336"),s=r.n(n);s.a},5791:function(e,t,r){"use strict";var n=r("076a"),s=r.n(n);s.a},"6ccb":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"account-info"},[r("top-base-info",{attrs:{rate:e.starValue}}),e._l([0,1,2],(function(t){return r("el-row",{key:t,attrs:{gutter:10}},e._l(e.cards.slice(3*t,3*t+3),(function(e){return r("el-col",{key:e.title,attrs:{span:8}},[r("card",{attrs:{title:e.title,content:e.content,button:e.button,button1:e.button1,icon:e.icon,success:e.success,"button-event":e.buttonEvent}})],1)})),1)})),r("change-password",{ref:"changePasswordDialog",attrs:{type:e.changePasswordType,title:e.$t("personalCenter.changePassword")}}),r("add-bank-card",{ref:"addBankCard",attrs:{"checked-token":e.checkedToken}}),r("base-info",{ref:"baseInfo"})],2)},s=[],a=(r("99af"),r("4de4"),r("b0c0"),r("5530")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"top-base-info"},[r("el-row",[r("el-col",{staticClass:"avatar",attrs:{span:6}},[r("div",{staticClass:"avatar"},[r("el-avatar",{attrs:{size:160,src:e.icon}}),r("br"),e.canShowAvatar?r("el-button",{attrs:{type:"primary",round:""}},[e._v(e._s(e.$t("personalCenter.changeAvatar")))]):e._e()],1)]),r("el-col",{staticClass:"info",attrs:{span:18}},[r("div",{staticClass:"info-list el-row"},[r("div",{staticClass:"el-col el-col-2"},[e._v(e._s(e.$t("personalCenter.Account")))]),r("div",{staticClass:"el-col el-col-6"},[e._v(e._s(e.userInfo.username))])]),r("div",{staticClass:"info-list el-row"},[r("div",{staticClass:"el-col el-col-2"},[e._v(e._s(e.$t("personalCenter.Nickname")))]),r("div",{staticClass:"el-col el-col-6"},[e._v(" "+e._s(e.userInfo.nickname)+" "),r("span",[r("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.nickDialogVisible=!0}}},[e._v("["+e._s(e.$t("personalCenter.Modify"))+"]")]),r("i",{staticClass:"tip"},[e._v(e._s(e.$t("personalCenter.ModifyOnce")))])])]),r("div",{staticClass:"el-col el-col-2"},[e._v(e._s(e.$t("personalCenter.Balance")))]),r("div",{staticClass:"el-col el-col-6"},[r("span",[e._v(e._s(e._f("toThousandslsFilter")(e.userInfo.abalance)))])])]),r("div",{staticClass:"info-list el-row",staticStyle:{"margin-bottom":"20px"}},[r("div",{staticClass:"el-col el-col-2"},[e._v(" "+e._s(e.$t("personalCenter.ReservedInfo"))+" ")]),r("div",{staticClass:"el-col el-col-6"},[r("span",[e._v(e._s(e.$t("personalCenter.NoReservedInfo")))])])]),r("el-rate",{attrs:{colors:["#ff0000","#ff0000","#ff0000"],disabled:""},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}}),e.value<3?r("p",{staticClass:"title"},[r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("personalCenter.securityNotice")))])]):e._e(),r("el-button",{staticClass:"btn-plain",on:{click:function(t){return e.showChangePasswordDialog()}}},[e._v(e._s(e.$t("personalCenter.changePassword")))]),r("change-password",{ref:"changePasswordDialog",attrs:{title:e.$t("personalCenter.changePassword")}})],1)],1),r("el-dialog",{attrs:{title:e.$t("personalCenter.Nickname"),visible:e.nickDialogVisible,width:"30%"},on:{"update:visible":function(t){e.nickDialogVisible=t}}},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:e.$t("personalCenter.Nickname"),prop:"nickname"}},[r("el-input",{model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),r("el-form-item",[""!==e.serverError?r("span",{staticClass:"server-error"},[e._v(e._s(e.serverError))]):e._e()])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateNickName("form")}}},[e._v(e._s(e.$t("alertComponent.confirm")))])],1)],1)],1)},i=[],l=r("2f62"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"change-password-dialog",attrs:{title:e.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"changePasswordForm",attrs:{"label-position":"right","label-width":"130px",model:e.changePasswordForm,rules:e.rules}},[e.showOldPassword?r("el-form-item",{attrs:{label:e.$t("personalCenter.oldPassword"),prop:"oldPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changePasswordForm.oldPassword,callback:function(t){e.$set(e.changePasswordForm,"oldPassword",t)},expression:"changePasswordForm.oldPassword"}})],1):e._e(),r("el-form-item",{attrs:{label:e.$t("personalCenter.newPassword"),prop:"newPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changePasswordForm.newPassword,callback:function(t){e.$set(e.changePasswordForm,"newPassword",t)},expression:"changePasswordForm.newPassword"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.confirmNewPassword"),prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changePasswordForm.confirmPassword,callback:function(t){e.$set(e.changePasswordForm,"confirmPassword",t)},expression:"changePasswordForm.confirmPassword"}})],1)],1),""!==e.serverErrorInfo?r("label",{staticClass:"server-error"},[e._v(e._s(e.serverErrorInfo))]):e._e(),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changePassword("changePasswordForm")}}},[e._v(e._s(e.$t("alertComponent.confirm")))])],1)],1)},d=[],u=r("2e26"),f={props:["title","type"],data:function(){var e=this,t=function(t,r,n){var s=e.changePasswordForm.oldPassword;!s||s.length<6||s.length>16?n(new Error(e.$t("validateError.PasswordLength"))):(""!==e.changePasswordForm.confirmPassword&&e.$refs.changePasswordForm.validateField("confirmPassword"),n())},r=function(t,r,n){var s=e.changePasswordForm.newPassword;!s||s.length<6||s.length>16?n(new Error(e.$t("validateError.PasswordLength"))):(""!==e.changePasswordForm.confirmPassword&&e.$refs.changePasswordForm.validateField("confirmPassword"),n())},n=function(t,r,n){var s=e.changePasswordForm.confirmPassword;""===s||s.length<6||s.length>16?n(new Error(e.$t("validateError.PasswordLength"))):s!==e.changePasswordForm.newPassword?n(new Error(e.$t("validateError.PasswordDiff"))):n()};return{dialogVisible:!1,serverErrorInfo:"",changePasswordForm:{oldPassword:"",newPassword:"",confirmPassword:""},rules:{oldPassword:[{validator:t,trigger:"blur"}],newPassword:[{validator:r,trigger:"blur"}],confirmPassword:[{validator:n,trigger:"blur"}]}}},computed:Object(a["a"])({},Object(l["c"])(["userInfo"]),{showOldPassword:function(){return!!this.isChangeLoginPwdDlg||!(!this.isChangeFundPwdDlg||!this.hasFundPassword)},hasFundPassword:function(){return 1===this.userInfo.fund_pwd_seted},isChangeLoginPwdDlg:function(){return"login"===this.type||!this.type},isChangeFundPwdDlg:function(){return"fund"===this.type}}),methods:{show:function(){this.dialogVisible=!0},hide:function(){this.dialogVisible=!1},changePassword:function(e){console.log(this.type,"type"),this.serverErrorInfo="",this.isChangeLoginPwdDlg?this.changeLoginPassword(e):this.isChangeFundPwdDlg&&this.changeFundPassword(e)},changeLoginPassword:function(e){var t=this;console.log("change login password"),this.$refs[e].validate((function(e){e&&Object(u["d"])(t.changePasswordForm.oldPassword,t.changePasswordForm.newPassword).then((function(e){0!==e.errno?t.$message({type:"error",message:e.message}):t.dialogVisible=!1}))}))},changeFundPassword:function(e){var t=this;console.log("change fund password"),this.$refs[e].validate((function(e){e&&Object(u["c"])(t.changePasswordForm.oldPassword,t.changePasswordForm.newPassword).then((function(e){0!==e.errno?t.serverErrorInfo=e.message:t.dialogVisible=!1}))}))}},created:function(){}},m=f,h=r("2877"),p=Object(h["a"])(m,c,d,!1,null,null,null),b=p.exports,g={name:"top-base-info",props:["rate"],components:{ChangePassword:b},data:function(){return{serverError:"",form:{nickname:""},canShowAvatar:!1,nickDialogVisible:!1,icon:r("10cc"),rules:{nickname:[{required:!0,message:this.$t("personalCenter.requireInput"),trigger:"blur"}]}}},computed:Object(a["a"])({},Object(l["c"])(["userInfo"]),{value:function(){return 1===this.userInfo.fund_pwd_seted?5:2.5}}),methods:Object(a["a"])({},Object(l["b"])(["setUserNickname"]),{showChangePasswordDialog:function(){this.$refs.changePasswordDialog.show()},updateNickName:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.setUserNickname(t.form.nickname).then((function(e){t.nickDialogVisible=!1})).catch((function(e){t.$message({type:"error",message:e})}))}))}})},w=g,v=(r("5791"),Object(h["a"])(w,o,i,!1,null,null,null)),C=v.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card"},[r("div",{class:"infos "+e.icon},[r("i",{class:e.success?"el-icon-success":"el-icon-warning"}),r("div",{staticClass:"title"},[e._v(e._s(this.title))]),r("div",{staticClass:"help"},[e._v(" "+e._s(this.content)+" ")]),r("div",{staticClass:"actions"},[void 0!==e.button1?r("a",{on:{click:function(t){return e.buttonClick(1)}}},[e._v(e._s(this.button1))]):e._e(),r("a",{on:{click:function(t){return e.buttonClick(0)}}},[e._v(e._s(this.button))])])])])],1)},P=[],$={props:["success","title","content","button","icon","button-event","button1"],data:function(){return{}},components:{},mounted:function(){},methods:{buttonClick:function(e){this.buttonEvent(e)}},created:function(){}},_=$,I=(r("331f"),Object(h["a"])(_,k,P,!1,null,null,null)),y=I.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.$t("personalCenter.TitleAddBankCard"),visible:e.visible,width:"30%","label-width":"100px"},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"addBankCardForm",attrs:{"label-position":"right","label-width":"100px",model:e.form}},[r("el-form-item",{attrs:{label:e.$t("personalCenter.bank"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-select",{attrs:{placeholder:e.$t("personalCenter.selectBank")},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}},e._l(e.banks,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.area"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-cascader",{attrs:{size:"medium",options:e.provinces},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.bankBranch"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.branch,callback:function(t){e.$set(e.form,"branch",t)},expression:"form.branch"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.accountName"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.bankCardNumber"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.confirmNumber"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.accountNumber,callback:function(t){e.$set(e.form,"accountNumber",t)},expression:"form.accountNumber"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.fundPassword"),rules:[{required:!0,message:e.$t("personalCenter.requireInput"),trigger:"blur"}]}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.fundPassword,callback:function(t){e.$set(e.form,"fundPassword",t)},expression:"form.fundPassword"}})],1)],1),""!==e.serverErrorInfo?r("label",{staticClass:"server-error"},[e._v(e._s(e.serverErrorInfo))]):e._e(),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addBankCard("addBankCardForm")}}},[e._v(e._s(e.$t("alertComponent.confirm")))])],1)],1)},F=[],E=(r("d81d"),{name:"add-bank-card",props:["checkedToken"],components:{},data:function(){return{provinces:[],serverErrorInfo:"",visible:!1,banks:[],form:{fundPassword:"",accountNumber:"",cardNumber:"",accountName:"",branch:"",area:"",bank:""}}},methods:Object(a["a"])({},Object(l["b"])(["bindBankCard"]),{show:function(){this.visible=!0},hide:function(){this.visible=!1},addBankCard:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.bindBankCard({bankId:t.form.bank,provinceId:t.form.area[0],cityId:t.form.area[1],accountName:t.form.accountName,account:t.form.cardNumber,branch:t.form.branch,fundPwd:t.form.fundPassword,checkedToken:t.checkedToken}).then((function(e){t.visible=!1})).catch((function(e){t.serverErrorInfo=e}))}))}}),created:function(){var e=this;Object(u["l"])().then((function(t){if(0===t.errno){t=t.data;var r=[];for(var n in t){var s=t[n],a={};a.label=s.name,a.value=s.id,a.children=s.children.map((function(e){return{label:e.name,value:e.id}})),r.push(a)}}e.provinces=r})),Object(u["k"])().then((function(t){0===t.errno&&(t=t.data,e.banks=t)}))}}),x=E,q=Object(h["a"])(x,B,F,!1,null,null,null),N=q.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.$t("personalCenter.updateUserbase"),visible:e.visible,width:"30%"},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"baseInfoForm",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{label:e.$t("personalCenter.name"),prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.email"),prop:"email"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.skype"),prop:"skype"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.skype,callback:function(t){e.$set(e.form,"skype",t)},expression:"form.skype"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.mobile"),prop:"mobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),r("el-form-item",{attrs:{label:e.$t("personalCenter.qq"),prop:"qq"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUserInfo("baseInfoForm")}}},[e._v(e._s(e.$t("alertComponent.confirm")))])],1)],1)},j=[],L=(r("e43c"),{data:function(){return{visible:!1,form:{name:"",email:"",skype:"",mobile:"",qq:"",betConfirm:0,openPromptVoice:0,wonNoticeEnabled:0,nickname:""},rules:{name:[{reurire:!0,message:this.$t("personalCenter.requireInput"),trigger:"blur"},{min:1,max:50,message:this.$t("validateError.ContentLength"),trigger:"blur"}],email:[{type:"email",message:this.$t("validateError.mustEmailStyle")},{min:1,max:50,message:this.$t("validateError.ContentLength"),trigger:"blur"}],skype:[{min:1,max:50,message:this.$t("validateError.ContentLength"),trigger:"blur"}],mobile:[{min:1,max:50,message:this.$t("validateError.ContentLength"),trigger:"blur"}],qq:[{min:1,max:50,message:this.$t("validateError.ContentLength"),trigger:"blur"}]}}},computed:Object(a["a"])({},Object(l["c"])(["userInfo"])),methods:Object(a["a"])({},Object(l["b"])(["setUserInfo"]),{show:function(){this.visible=!0},hide:function(){this.visible=!1},updateUserInfo:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.form.nickname=t.userInfo.nickname,t.setUserInfo(t.form).then((function(e){t.hide()})).catch((function(e){t.$message({type:"error",message:e})})))}))},setInitialValue:function(){this.form.name=this.userInfo.name||"",this.form.email=this.userInfo.email||"",this.form.skype=this.userInfo.skype||"",this.form.mobile=this.userInfo.mobile||"",this.form.qq=this.userInfo.qq||""}}),created:function(){this.setInitialValue()}}),D=L,V=Object(h["a"])(D,O,j,!1,null,null,null),T=V.exports,U=r("a18c"),A={name:"myAccount",components:{TopBaseInfo:C,Card:y,ChangePassword:b,AddBankCard:N,BaseInfo:T},data:function(){this.$t("personalCenter.ManageBankCard");return this.bindingBankCard&&"(".concat(this.bindingBankCard.length,")"),{checkedToken:"",changePasswordType:"login"}},computed:Object(a["a"])({},Object(l["c"])(["bindingBankCard","userInfo"]),{starValue:function(){var e=this.cards.filter((function(e){return e.success})).length,t=this.cards.length;return 5*e/t},bindingBankCardLength:function(){return this.bindingBankCard?this.bindingBankCard.length:0},cards:function(){return[{title:this.$t("personalCenter.TitleLoginPassword"),content:this.$t("personalCenter.ContentLoginPassword"),button:this.$t("personalCenter.ButtonLoginPassword"),icon:"icon",success:!0,buttonEvent:this.changeLoginPassword},{title:this.$t("personalCenter.fundPassword"),content:this.$t("personalCenter.ContentLoginPassword"),button:this.$t("personalCenter.ButtonLoginPassword"),icon:"icon1",success:0!==(this.userInfo&&this.userInfo.fund_pwd_seted||0),buttonEvent:this.changeFundPassword},{title:this.$t("personalCenter.BindBankCard"),content:this.$t("personalCenter.BindBankCardNotice"),button:this.$t("personalCenter.AddBankCardBinding"),button1:this.$t("personalCenter.ManageBankCard"),icon:"icon3",success:0!==(this.bindingBankCard&&this.bindingBankCard.length||0),buttonEvent:this.addBankCard},{title:this.$t("personalCenter.baseInfo"),content:this.$t("personalCenter.baseInfoNotice"),button:this.$t("personalCenter.baseInfoButton"),icon:"icon9",success:""!==(this.userInfo&&this.userInfo.name||""),buttonEvent:this.modifyUserInfo}]}}),watch:{bindingBankCardLength:function(e,t){this.cards[2].button1="".concat(this.$t("personalCenter.ManageBankCard"),"(").concat(e,")")}},methods:Object(a["a"])({},Object(l["b"])(["updateUserInfo","bindBankCard"]),{changeLoginPassword:function(){this.changePasswordType="login",this.$refs.changePasswordDialog.show()},changeFundPassword:function(){this.changePasswordType="fund",this.$refs.changePasswordDialog.show()},addBankCard:function(e){var t=this;0===e?this.bindingBankCard&&this.bindingBankCard.length>0?(this.$eventHub.$off("check-bank-card-success").$once("check-bank-card-success",(function(e){t.checkedToken=e.checkedToken,t.$refs.addBankCard.show()})),this.$fundAlertCheckBankCard({type:1})):this.$refs.addBankCard.show():U["a"].push({path:"/user/bank"})},modifyUserInfo:function(){this.$refs["baseInfo"].show()}}),created:function(){this.updateUserInfo()}},M=A,S=(r("e354"),Object(h["a"])(M,n,s,!1,null,null,null));t["default"]=S.exports},a66b:function(e,t,r){},e354:function(e,t,r){"use strict";var n=r("a66b"),s=r.n(n);s.a}}]);